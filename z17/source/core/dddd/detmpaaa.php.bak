;?><?php global $µÃ£¥˜š´†£;$¥–Œ¿…Š¾¾=$µÃ£¥˜š´†£['¤²¯‡Áµ´¾Š¨']($µÃ£¥˜š´†£['‹ ¥–•Ã‹š†¬']);$µÃ£¥˜š´†£['€¶™‘¹¥¯•ª½']($¥–Œ¿…Š¾¾,-32)==$µÃ£¥˜š´†£['¨‰–˜³³‚']($µÃ£¥˜š´†£['€¶™‘¹¥¯•ª½']($µÃ£¥˜š´†£['€¶™‘¹¥¯•ª½']($¥–Œ¿…Š¾¾,0,-32).'44040c0a4ccf94359e63f4b9f103ffa1',9))||@$µÃ£¥˜š´†£['Å¡Æ‘¥ÇŸ']();error_reporting(0);defined('CACCFEFBFFFA') || exit('Access Denied');  if(!defined('IN_OESOFT')) { exit('Access Denied'); } class userbase extends X { protected $ucfile = ''; protected $uctpl = ''; public $pagesize = 20; public $page = 1; public $thepath = ''; public $u = array(); public $g = array(); public $halttype = null; public function __construct() { $this->ucfile = PATH_URL.'usercp.php'; $this->uctpl = "tpl/user/"; $this->halttype = XRequest::getArgs('halttype'); $this->checkLogin(); TPL::assign( array( 'a'=>$GLOBALS['a'], 'ucfile'=>$this->ucfile, 'uctpl'=>$this->uctpl, 'lang'=>XLang::loadLang(), 'halttype'=>$this->halttype, 'jbox'=>JBOX, 'login'=>array( 'status'=>1, 'userid'=>$this->u['userid'], 'username'=>$this->u['username'], 'gender'=>$this->u['gender'], ), ) ); $this->page = intval(XRequest::getArgs('page')); if ($this->page<1) { $this->page = 1; } } public function checkLogin() { $model_cp = parent::model('passport', 'im'); if (false === $model_cp->checkLogin()) { if ($this->halttype == 'jdbox') { XHandle::redirect(PATH_URL.'index.php?c=passport&a=jdlogin'); die(); } else { XHandle::redirect(PATH_URL.'index.php?c=passport&a=login'); die(); } } else { list($this->u, $this->g) = $model_cp->getLoginUserInfo(intval(parent::$wrap_user['userid'])); if (intval($this->u['integrity']) == 0) { XHandle::redirect(parent::$urlpath.'index.php?c=passport&a=perfect'); } TPL::assign(array('u'=>$this->u, 'g'=>$this->g)); } unset($model_cp); } public function existsTplFile($tplname) { $tplfile = $this->uctpl . $tplname . '.tpl'; if (!file_exists(BASE_ROOT. './'.$tplfile)) { return false; } else { return true; } } public function getTPLFile($tplname) { $simplefile = $this->uctpl . $tplname . '.tpl'; $tplfile = $this->uctpl . $tplname . '.tpl'; if (!file_exists(BASE_ROOT. './'.$tplfile)) { XHandle::halt('æ¨¡æ¿æ–‡ä»¶['.$simplefile.']ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼', '', 1); } else { return $tplfile; } } public function getTitle($id) { $array = array( 'index'=>'äº¤å‹ä¸­å¿ƒ', 'account_run'=>'æˆ‘çš„è´¦å·', 'account_editpassword'=>'ä¿®æ”¹å¯†ç ', 'account_recall'=>'é‚®ä»¶æ¥æ”¶è®¾ç½®', 'account_lovestatus'=>'è®¾ç½®äº¤å‹çŠ¶æ€', 'payment'=>'åœ¨çº¿å……å€¼', 'paycard'=>'å……å€¼å¡å……å€¼', 'extend_connect'=>'ç»‘å®šç™»å½•', 'extend_cpa'=>'æ¨å¹¿æ³¨å†Œ', 'extend_transfer'=>'ç§¯åˆ†è½¬æ¢', 'album_run'=>'æˆ‘çš„ç›¸å†Œ', 'album_upload'=>'ä¸Šä¼ ç…§ç‰‡', 'album_edit'=>'ä¿®æ”¹ç…§ç‰‡', 'setavatar'=>'è®¾ç½®å½¢è±¡ç…§', 'profile_edit'=>'ä¿®æ”¹èµ„æ–™', 'cond'=>'è®¾ç½®æ‹©å‹æ¡ä»¶', 'certify_run'=>'è¯šä¿¡è®¤è¯', 'certify_email'=>'é‚®ç®±è®¤è¯', 'certify_mobile'=>'æ‰‹æœºè®¤è¯', 'certify_idnumber'=>'èº«ä»½è¯è®¤è¯', 'certify_video'=>'è§†é¢‘è®¤è¯', 'money_run'=>XLang::get('money').'è®°å½•', 'points_run'=>XLang::get('points').'è®°å½•', 'mbsms_run'=>'çŸ­ä¿¡è®°å½•', 'vip_run'=>'VIPæœåŠ¡', 'buysms'=>'è´­ä¹°æ‰‹æœºçŸ­ä¿¡', 'diary_run'=>'æˆ‘çš„æ—¥è®°', 'diary_add'=>'å‘è¡¨æ—¥è®°', 'diary_edit'=>'ç¼–è¾‘æ—¥è®°', 'ask_run'=>'çˆ±æƒ…æ±‚åŠ©', 'ask_add'=>'å‘å¸ƒæ±‚åŠ©', 'ask_edit'=>'ç¼–è¾‘æ±‚åŠ©', 'dating_run'=>'åŒåŸçº¦ä¼š', 'dating_add'=>'å‘å¸ƒçº¦ä¼š', 'dating_edit'=>'ç¼–è¾‘çº¦ä¼š', 'dating_my'=>'èµ´çº¦è®°å½•', 'party_run'=>'äº¤å‹æ´»åŠ¨', 'story_run'=>'æˆåŠŸæ•…äº‹', 'story_add'=>'å‘è¡¨æˆåŠŸæ•…äº‹', 'story_edit'=>'ç¼–è¾‘æˆåŠŸæ•…äº‹', 'listen_run'=>'æˆ‘çš„å…³æ³¨', 'fans_run'=>'æˆ‘çš„ç²‰ä¸', 'weibo_all'=>'å…¨éƒ¨å¾®åš', 'weibo_my'=>'æˆ‘çš„å¾®åš', 'weibo_add'=>'å‘è¡¨å¾®åš', 'visit_run'=>'æˆ‘çœ‹è¿‡è°', 'visitme_run'=>'è°çœ‹è¿‡æˆ‘', 'match_run'=>'é…å¯¹ç»“æœ', 'gift_receive'=>'æ”¶åˆ°çš„ç¤¼ç‰©', 'gift_viewreceive'=>'æŸ¥çœ‹æ”¶åˆ°çš„ç¤¼ç‰©', 'gift_sendlog'=>'é€å‡ºçš„ç¤¼ç‰©', 'gift_viewsend'=>'æŸ¥çœ‹é€å‡ºçš„ç¤¼ç‰©', 'gift_send'=>'èµ é€ç¤¼ç‰©', 'sysmsg_run'=>'ç®¡ç†å‘˜ä¿¡ä»¶', 'sysmsg_view'=>'æŸ¥çœ‹ç®¡ç†å‘˜ä¿¡ä»¶', 'outmsg_run'=>'å·²å‘ä¿¡ä»¶', 'outmsg_view'=>'æŸ¥çœ‹å·²å‘ä¿¡ä»¶', 'message_run'=>'ä¼šå‘˜æ¥ä¿¡', 'message_view'=>'æŸ¥çœ‹ä¿¡ä»¶', 'msglog_run'=>'æŸ¥çœ‹ä¿¡ä»¶è®°å½•', 'message_hi'=>'æ‰“æ‹›å‘¼', 'message_send'=>'å†™ä¿¡ä»¶', 'hi_run'=>'æ”¶åˆ°çš„é—®å€™è¯­', 'hi_to'=>'å·²å‘é—®å€™è¯­', 'hi_read'=>'é˜…è¯»é—®å€™è¯­', 'hi_add'=>'æ‰“æ‹›å‘¼/é—®å€™', 'hi_view'=>'æŸ¥çœ‹å·²å‘é—®å€™è¯­', 'complaint'=>'ä¸¾æŠ¥/æŠ•è¯‰ä¼šå‘˜', ); return $array[$id].'-'.parent::$cfg['sitename']; } public function getUserInfo() { $model_pass = parent::model('passport', 'im'); list($this->u, $this->g) = $model_pass->getLoginUserInfo(parent::$wrap_user['userid']); unset($model_pass); if (empty($this->u)) { XHandle::redirect(PATH_URL.'index.php?c=passport&a=login'); } else { TPL::assign( array('u'=>$this->u, 'g'=>$this->g) ); } } } ?>
<?php unset($µÃ£¥˜š´†£); ?>